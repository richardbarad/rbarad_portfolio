"0","allTracts_17 <- all_census_data %>% filter(year == 2017)"
"0","allTracts_09 <- all_census_data %>% filter(year == 2009)"
"0",""
"0","MRB <- multipleRingBuffer(st_union(dcmetro), 2640*10, 2640)"
"0",""
"0","rings_17 <- st_join(st_centroid(allTracts_17), MRB, join = st_intersects) %>% "
"0","            st_drop_geometry() %>%"
"0","            select('GEOID','distance') %>%"
"0","            left_join(allTracts_17, by = ""GEOID"") %>%   "
"0","            mutate(distance_miles = distance / 5280) %>%            "
"0","            st_sf()"
"0",""
"0","rings_09 <- st_join(st_centroid(allTracts_09), MRB, join = st_intersects) %>%  "
"0","            st_drop_geometry() %>%"
"0","            select('GEOID','distance') %>%"
"0","            left_join(allTracts_09, by = ""GEOID"") %>%            "
"0","            mutate(distance_miles = distance / 5280) %>%"
"0","            st_sf()"
"0",""
"0","rings <- rbind(rings_17, rings_09) "
"0","rings <- dplyr::filter(rings, distance_miles != 3.5)"
"0",""
"0","ggplot() +"
"0","  #add line tod vs non tod and how many houses there are tod vs non tod"
"0","  geom_line(data = rings, aes(x = distance_miles, y = median_rent, color = year), stat = ""summary"", fun = mean,linewidth=1.3)+"
"0","  geom_point(data = rings, aes(x= distance_miles, y= median_rent, color= year), stat = ""summary"", fun = mean, size=3)+"
"0","  ylim(0,2000)+"
"0","  xlim(0.5,2.5)+"
"0","  ggtitle('Rent as a function of distance to metro stops')+"
"0","  scale_x_continuous(breaks = c(0.5,1,1.5,2,2.5),"
"0","    labels = paste0(c(""0m-0.5m"", ""0.51m - 1.0m"", ""1.01m - 1.50m"", ""1.51m - 2.00m"", ""2.01m - 2.50m"")))+"
"0","  xlab('Distance in miles')+"
"0","  ylab('Mean Monthly rent (USD)')+"
"0","  theme_bw()"
